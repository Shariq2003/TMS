<div class="task-form-wrapper">
    <h2 class="form-title">üìù {{PageTitle}}</h2>
    <form class="task-form" [formGroup]="taskForm" (ngSubmit)="onSubmit($event)">

        <!-- Title -->
        <div class="form-group">
            <app-kendo-label [label]="'Title'"></app-kendo-label>
            <app-kendo-input [control]="titleControl" [label]="'Title'" [placeholder]="'Enter title'">
            </app-kendo-input>
            <app-kendo-error [control]="titleControl" [error]="'Title is required'">
            </app-kendo-error>
        </div>

        <!-- Description -->
        <div class="form-group">
            <app-kendo-label [label]="'Description'"></app-kendo-label>
            <app-kendo-textarea [control]="descriptionControl" [label]="'Description'"
                [placeholder]="'Enter description'">
            </app-kendo-textarea>
            <app-kendo-error [control]="descriptionControl" [error]="'Description is required'">
            </app-kendo-error>
        </div>

        <!-- Status and Priority -->
        <div class="form-field-group">
            <div class="form-group">
                <app-kendo-label [label]="'Status'"></app-kendo-label>
                <app-kendo-dropdown 
                    [dropdownData]="[{ text: 'In Progress', value: 'In Progress' },{ text: 'Pending', value: 'Pending' },{ text: 'Completed', value: 'Completed' }]" 
                    [default]="'Select Status'"
                    [control]="statusControl">
                </app-kendo-dropdown>
                <app-kendo-error [control]="statusControl" [error]="'Status is required'">
                </app-kendo-error>
            </div>
            <div class="form-group">
                <app-kendo-label [label]="'Priority'"></app-kendo-label>
                <app-kendo-dropdown 
                    [dropdownData]="[{ text: 'Low', value: 'Low' },{ text: 'Medium', value: 'Medium' },{ text: 'High', value: 'High' }]" 
                    [default]="'Select Priority'"
                    [control]="priorityControl">
                </app-kendo-dropdown>
                <app-kendo-error [control]="priorityControl" [error]="'Priority is required'">
                </app-kendo-error>
            </div>
        </div>

        <!-- Dates -->
        <div class="form-field-group">
            <app-kendo-daterange [startLabel]="'Start Date'" [endLabel]="'End Date'"
                (dateRangeChange)="onDateRangeChanged($event)" 
                [startDate]="transformDate(taskForm.get('startDate')?.value)"
                [endDate]="transformDate(taskForm.get('endDate')?.value)">
            </app-kendo-daterange>
        </div>

        <!-- Assignee -->
        <div class="form-group">
            <app-kendo-label [label]="'Assign To'"></app-kendo-label>
            <app-kendo-input [control]="assignedControl" [label]="'Assign To'" [placeholder]="'Enter assignee'">
            </app-kendo-input>
            <app-kendo-error [control]="assignedControl" [error]="'Assignee is required'">
            </app-kendo-error>
        </div>

        <!-- Submit -->
        <div class="submit-btn">
            <app-kendo-button 
                [buttonText]="formType === 'add' ? ' Add Task' : 'Update Task'" 
                [action]="{
                    type: formType === 'add' ? 'add' : 'edit',
                    link: '/',
                    class: 'k-icon k-font-icon ' + (formType==='add' ? 'k-i-plus' : 'k-i-edit'),
                    color: '#00a6ff'
                }" 
                (handleClick)="onSubmit($event)">
            </app-kendo-button>
        </div>
    </form>
</div>